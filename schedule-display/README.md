# Schedule Display Plugin

Googleカレンダーの予定をWordPressサイトに表示するプラグイン（ICS形式対応）

## 主な機能

* GoogleカレンダーのICS（iCal）URLから予定を取得
* 月別・リスト形式での表示
* カスタマイズ可能なテーマ（デフォルト、モダン、ビジネス、カジュアル、ダークモード、透明背景）
* カスタムスタイル設定（フォントサイズ、太さ、色、背景色など）
* ポップアップによる詳細表示
* キャッシュ機能による高速表示
* 除外パターンによる予定のフィルタリング
* レスポンシブデザイン対応
* iframe埋め込み対応

## インストール方法

### 方法1: ZIPファイルからインストール

1. `schedule-display.zip` ファイルをダウンロード
2. WordPress管理画面の「プラグイン > 新規追加 > プラグインのアップロード」からZIPファイルをアップロード
3. 「今すぐインストール」をクリック
4. インストール後、「プラグインを有効化」をクリック

### 方法2: FTP経由でインストール

1. `schedule-display` フォルダを `wp-content/plugins/` ディレクトリにアップロード
2. WordPress管理画面の「プラグイン」メニューから「Schedule Display」を有効化

## セットアップ

### 1. GoogleカレンダーでICS URLを取得

1. Googleカレンダーを開く
2. カレンダーの「設定と共有」をクリック
3. 「カレンダーを共有」セクションで「インターネット上で一般公開する」にチェック
4. 「カレンダーのパブリックアドレス（ICS形式）」をコピー

### 2. WordPress管理画面で設定

1. 「設定 > スケジュール表示」を開く
2. 取得したICS URLを入力
3. 表示期間（未来何日分の予定を表示するか）を設定（デフォルト: 60日）
4. 必要に応じて除外パターンを設定（例: 「休業,祝日」）

### 3. ページの表示

プラグイン有効化時に `/schedule` というスラッグのページが自動的に作成されます。
または、任意のページに以下のショートコードを追加：

```
[schedule_display]
```

## 使用方法

### ショートコード

基本使用:
```
[schedule_display]
```

パラメータ指定:
```
[schedule_display days="60" ics_url="https://..." exclude_patterns="休業,祝日"]
```

### テーマ選択

「設定 > スケジュール表示 > スタイル設定」からテーマを選択できます：

* **デフォルト**: シンプルで読みやすい標準テーマ（白背景）
* **モダン**: 洗練されたモダンなデザイン（ライトグレー背景）
* **ビジネス**: プロフェッショナルなビジネス向けデザイン（ダークモード）
* **カジュアル**: 親しみやすいカジュアルなデザイン（温かみのある背景）
* **ダークモード**: ダークモード（暗い背景）
* **透明背景**: 背景が透明なテーマ

### カスタムスタイル

「カスタム」テーマを選択すると、各パーツのスタイルを個別に設定できます。

背景を透明にする場合：
- 完全透明: `transparent` または `rgba(0,0,0,0)`
- 半透明: `rgba(255,255,255,0.7)` （数値は調整可能）

### iframe埋め込み

他のサイトに埋め込む場合：

```html
<iframe src="https://example.com/schedule" width="100%" height="900"></iframe>
```

## ファイル構成

```
schedule-display/
├── schedule-display.php      # メインプラグインファイル
├── schedule-embed-template.php # カスタムテンプレート（オプション）
├── assets/
│   ├── style.css            # スタイルシート
│   └── script.js            # JavaScript
├── readme.txt               # WordPressプラグインディレクトリ用
└── README.md                # このファイル
```

## トラブルシューティング

### 予定が表示されない場合

1. ICS URLが正しく設定されているか確認
2. Googleカレンダーが「公開」設定になっているか確認
3. 「キャッシュをクリア」ボタンをクリック
4. デバッグモードを有効にして、取得データを確認

### 時間がずれる場合

WordPressのタイムゾーン設定を確認してください：
「設定 > 一般 > タイムゾーン」

### キャッシュをクリアする

「設定 > スケジュール表示」ページの「キャッシュをクリア」ボタンをクリックしてください。
デフォルトでは1時間ごとに自動更新されます。

## システム要件

* WordPress 5.0以上
* PHP 7.4以上
* GoogleカレンダーのICS（iCal）URL

## ライセンス

GPL v2 or later

## サポート

問題が発生した場合は、以下を確認してください：

1. WordPress、PHPのバージョンが要件を満たしているか
2. プラグインのバージョン
3. エラーメッセージの内容
4. デバッグモードでの取得データ
