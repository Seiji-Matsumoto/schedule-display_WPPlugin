# Schedule Display プラグイン - インストールガイド

## プラグインのパッケージ化

プラグインは既に配布可能な形式でパッケージ化されています。

パッケージファイル: `schedule-display.zip` (約23KB)

## 他のサイトへのインストール方法

### 方法1: WordPress管理画面からアップロード（推奨）

1. WordPress管理画面にログイン
2. 「プラグイン > 新規追加」を開く
3. 「プラグインのアップロード」をクリック
4. `schedule-display.zip` ファイルを選択してアップロード
5. 「今すぐインストール」をクリック
6. インストール完了後、「プラグインを有効化」をクリック

### 方法2: FTP/SFTP経由でアップロード

1. `schedule-display.zip` を解凍
2. `schedule-display` フォルダをFTP/SFTPクライアントでアップロード
3. アップロード先: `wp-content/plugins/schedule-display/`
4. WordPress管理画面の「プラグイン」メニューから「Schedule Display」を有効化

### 方法3: サーバーコマンドラインから

```bash
# WordPressのプラグインディレクトリに移動
cd /path/to/wordpress/wp-content/plugins/

# ZIPファイルをアップロードして解凍
unzip schedule-display.zip

# 権限を設定（必要に応じて）
chmod -R 755 schedule-display/

# WordPress管理画面から有効化
```

## インストール後の設定

### 1. プラグインの有効化

WordPress管理画面の「プラグイン」メニューから「Schedule Display」を有効化してください。
有効化すると、自動的に `/schedule` というスラッグのページが作成されます。

### 2. GoogleカレンダーでICS URLを取得

1. Googleカレンダーを開く
2. 設定したいカレンダーの「設定と共有」をクリック
3. 「カレンダーを共有」セクションで「インターネット上で一般公開する」にチェック
4. 「カレンダーのパブリックアドレス（ICS形式）」のURLをコピー

### 3. WordPress管理画面で設定

1. 「設定 > スケジュール表示」を開く
2. 以下の項目を設定：
   - **ICS URL**: 取得したGoogleカレンダーのICS URL
   - **表示期間**: 未来何日分の予定を表示するか（デフォルト: 60日）
   - **除外パターン**: 表示しない予定のタイトル（カンマ区切り、例: 「休業,祝日」）
   - **テーマ選択**: プリセットテーマまたはカスタムスタイル
3. 「変更を保存」をクリック

### 4. ページの確認

プラグイン有効化時に作成された `/schedule` ページにアクセスして、スケジュールが正しく表示されるか確認してください。

または、任意のページや投稿に以下のショートコードを追加：

```
[schedule_display]
```

## ファイル構成

プラグインのファイル構成：

```
wp-content/plugins/schedule-display/
├── schedule-display.php          # メインプラグインファイル
├── schedule-embed-template.php   # カスタムテンプレート（オプション）
├── assets/
│   ├── style.css                 # スタイルシート
│   └── script.js                 # JavaScript
├── readme.txt                    # WordPressプラグインディレクトリ用
└── README.md                     # 詳細なドキュメント
```

## システム要件

- **WordPress**: 5.0以上
- **PHP**: 7.4以上
- **Googleカレンダー**: ICS（iCal）形式の公開URLが必要

## トラブルシューティング

### 予定が表示されない場合

1. ICS URLが正しく設定されているか確認
2. Googleカレンダーが「公開」設定になっているか確認
3. 「キャッシュをクリア」ボタンをクリック
4. デバッグモードを有効にして、取得データを確認

### 時間がずれる場合

WordPressのタイムゾーン設定を確認：
「設定 > 一般 > タイムゾーン」

### キャッシュの問題

デフォルトでは1時間ごとに自動更新されますが、即座に反映したい場合は：
「設定 > スケジュール表示 > キャッシュをクリア」をクリック

## カスタマイズ

### ショートコードのパラメータ

```
[schedule_display days="60" ics_url="https://..." exclude_patterns="休業,祝日"]
```

### テーマのカスタマイズ

「設定 > スケジュール表示 > スタイル設定」から：
- プリセットテーマを選択
- または「カスタム」を選択して個別設定

### iframe埋め込み

他のサイトに埋め込む場合：

```html
<iframe src="https://example.com/schedule" width="100%" height="900"></iframe>
```

## アップデート方法

新しいバージョンにアップデートする場合：

1. 現在のプラグインを無効化（推奨）
2. 旧バージョンのフォルダを削除または上書き
3. 新バージョンのファイルをアップロード
4. プラグインを有効化
5. 設定を確認（通常は保持されます）

## アンインストール

プラグインを完全に削除する場合：

1. WordPress管理画面でプラグインを無効化
2. プラグインを削除
3. オプション: `wp_options` テーブルから `schedule_*` で始まるオプションを削除（データベースのクリーンアップ）

注意: プラグイン削除時に作成された `/schedule` ページは自動的に削除されません。手動で削除してください。

## サポート

問題が発生した場合は、以下を確認してください：

1. WordPress、PHPのバージョンが要件を満たしているか
2. プラグインのバージョン
3. エラーメッセージの内容（WP_DEBUGが有効な場合）
4. デバッグモードでの取得データ
